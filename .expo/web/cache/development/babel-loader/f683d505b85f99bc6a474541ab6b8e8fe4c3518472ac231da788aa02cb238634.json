{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport { useFocusEffect, useNavigation, useRoute } from \"@react-navigation/native\";\nimport { SessionService } from \"../../../services/user/session.service\";\nimport { CRUDService } from \"../../../services/user/CRUD.service\";\nimport StyledTextInputs from \"../../components/inputs/StyledTextInputs\";\nimport { PublicationService } from \"../../../services/publication/publication.service\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function ScreenPublicationUpB() {\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    currentUser = _useState2[0],\n    setCurrentUser = _useState2[1];\n  var _useState3 = useState(\"\"),\n    _useState4 = _slicedToArray(_useState3, 2),\n    textPublication = _useState4[0],\n    setTextPublication = _useState4[1];\n  var _useState5 = useState(true),\n    _useState6 = _slicedToArray(_useState5, 2),\n    loading = _useState6[0],\n    setLoading = _useState6[1];\n  var route = useRoute();\n  var navigation = useNavigation();\n  var _ref = route.params || {},\n    photoPublication = _ref.photoPublication;\n  useEffect(function () {\n    setLoading(true);\n    var loadPhoto = function () {\n      var _ref2 = _asyncToGenerator(function* () {\n        setTimeout(function () {\n          setLoading(false);\n        }, 2000);\n      });\n      return function loadPhoto() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    loadPhoto();\n  }, []);\n  useFocusEffect(React.useCallback(function () {\n    var getUser = function () {\n      var _ref3 = _asyncToGenerator(function* () {\n        var userId = yield SessionService.getCurrentUser();\n        if (userId) {\n          try {\n            yield CRUDService.getUser(userId).then(function (response) {\n              setCurrentUser(response == null ? void 0 : response.data);\n            });\n          } catch (error) {}\n        }\n      });\n      return function getUser() {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n    getUser();\n  }, []));\n  var handlePublication = function () {\n    var _ref4 = _asyncToGenerator(function* () {\n      var _currentUser$uuid;\n      var formData = {\n        idUser: (_currentUser$uuid = currentUser == null ? void 0 : currentUser.uuid) != null ? _currentUser$uuid : \"\",\n        textPublication: textPublication != null ? textPublication : \"\",\n        photoPublication: photoPublication != null ? photoPublication : \"\"\n      };\n      console.log(\"FORM DATA:   \" + JSON.stringify(formData));\n      PublicationService.uploadPublication(formData).then(function (response) {\n        console.log(\"QQQ\" + response);\n        if (response.status === 200) {\n          console.log(response.data);\n        } else {\n          console.log(\"STATUS:    \" + response.status);\n        }\n      }).catch(function (error) {\n        console.error(\"error: \" + error);\n        console.log(\"error.response: \" + error.response);\n        switch (error.response.status) {\n          case 403:\n            console.log(\"Error\");\n            break;\n          case 404:\n            console.log(\"Error2\");\n            break;\n        }\n      });\n      navigation.navigate(\"HomeScreen\");\n    });\n    return function handlePublication() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  return _jsx(View, {\n    children: loading ? _jsx(ActivityIndicator, {\n      size: \"large\",\n      color: \"blue\"\n    }) : _jsxs(_Fragment, {\n      children: [_jsx(Image, {\n        source: {\n          uri: photoPublication\n        },\n        style: {\n          width: 200,\n          height: 200\n        }\n      }), _jsx(StyledTextInputs, {\n        placeholder: \"Text Publication\",\n        value: textPublication,\n        onChangeText: function onChangeText(value) {\n          return setTextPublication(value);\n        }\n      }), _jsx(Button, {\n        title: \"Upload Foto\",\n        onPress: handlePublication\n      })]\n    })\n  });\n}","map":{"version":3,"names":["React","useState","useEffect","View","Button","Image","ActivityIndicator","useFocusEffect","useNavigation","useRoute","SessionService","CRUDService","StyledTextInputs","PublicationService","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","ScreenPublicationUpB","_useState","_useState2","_slicedToArray","currentUser","setCurrentUser","_useState3","_useState4","textPublication","setTextPublication","_useState5","_useState6","loading","setLoading","route","navigation","_ref","params","photoPublication","loadPhoto","_ref2","_asyncToGenerator","setTimeout","apply","arguments","useCallback","getUser","_ref3","userId","getCurrentUser","then","response","data","error","handlePublication","_ref4","_currentUser$uuid","formData","idUser","uuid","console","log","JSON","stringify","uploadPublication","status","catch","navigate","children","size","color","source","uri","style","width","height","placeholder","value","onChangeText","title","onPress"],"sources":["C:/Users/oscar/Desktop/proyecto/2005/FrontEnd_EA_app/my-project/src/infrastructure/UI/screens/Publication/publicationUpB.screen.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { View, Text, Button, Image, ActivityIndicator } from \"react-native\";\r\nimport { UserEntity } from \"../../../../domain/user/user.entity\";\r\nimport { useFocusEffect, useNavigation, useRoute } from \"@react-navigation/native\";\r\nimport { SessionService } from \"../../../services/user/session.service\";\r\nimport { CRUDService } from \"../../../services/user/CRUD.service\";\r\nimport { PublicationEntity } from \"../../../../domain/publication/publication.entity\";\r\nimport { TextInput } from \"react-native-gesture-handler\";\r\nimport StyledTextInputs from \"../../components/inputs/StyledTextInputs\";\r\nimport { PublicationService } from \"../../../services/publication/publication.service\";\r\n\r\ninterface RouteParams {\r\n  photoPublication?: string;\r\n}\r\n\r\nexport default function ScreenPublicationUpB() {\r\n  const [currentUser, setCurrentUser] = useState<UserEntity | null>(null);\r\n  const [textPublication, setTextPublication] = useState(\"\");\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const route = useRoute();\r\n  const navigation = useNavigation();\r\n  const { photoPublication }: RouteParams = route.params || {};\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const loadPhoto = async () => {\r\n      // Simulating image loading delay\r\n      setTimeout(() => {\r\n        setLoading(false);\r\n      }, 2000);\r\n    };\r\n    loadPhoto();\r\n  }, []);\r\n\r\n  useFocusEffect(\r\n    React.useCallback(() => {\r\n      const getUser = async () => {\r\n        const userId = await SessionService.getCurrentUser();\r\n        if (userId) {\r\n          try {\r\n            await CRUDService.getUser(userId).then((response) => {\r\n              setCurrentUser(response?.data);\r\n            });\r\n          } catch (error) {}\r\n        }\r\n      };\r\n      getUser();\r\n    }, [])\r\n  );\r\n\r\n  const handlePublication = async () => {\r\n    const formData: PublicationEntity = {\r\n      idUser: currentUser?.uuid ?? \"\",\r\n      textPublication: textPublication ?? \"\",\r\n      photoPublication: photoPublication ?? \"\",\r\n    };\r\n    console.log(\"FORM DATA:   \" + JSON.stringify(formData));\r\n    PublicationService.uploadPublication(formData)\r\n      .then((response) => {\r\n        console.log(\"QQQ\" + response);\r\n        if (response.status === 200) {\r\n          console.log(response.data);\r\n        } else {\r\n          console.log(\"STATUS:    \" + response.status);\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"error: \" + error);\r\n        console.log(\"error.response: \" + error.response);\r\n        switch (error.response.status) {\r\n          case 403:\r\n            // Poner aquí el alert ...\r\n            console.log(\"Error\");\r\n            break;\r\n          case 404:\r\n            // Poner aquí el alert ...\r\n            console.log(\"Error2\");\r\n            break;\r\n        }\r\n      });\r\n    navigation.navigate(\"HomeScreen\" as never);\r\n  };\r\n\r\n  return (\r\n    <View>\r\n      {loading ? (\r\n        <ActivityIndicator size=\"large\" color=\"blue\" />\r\n      ) : (\r\n        <>\r\n          <Image\r\n            source={{ uri: photoPublication }}\r\n            style={{ width: 200, height: 200 }}\r\n          />\r\n          <StyledTextInputs\r\n            placeholder=\"Text Publication\"\r\n            value={textPublication}\r\n            onChangeText={(value: React.SetStateAction<string>) =>\r\n              setTextPublication(value)\r\n            }\r\n          />\r\n          <Button title=\"Upload Foto\" onPress={handlePublication} />\r\n        </>\r\n      )}\r\n    </View>\r\n  );\r\n}\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAAC,OAAAC,IAAA;AAAA,OAAAC,MAAA;AAAA,OAAAC,KAAA;AAAA,OAAAC,iBAAA;AAGnD,SAASC,cAAc,EAAEC,aAAa,EAAEC,QAAQ,QAAQ,0BAA0B;AAClF,SAASC,cAAc;AACvB,SAASC,WAAW;AAGpB,OAAOC,gBAAgB;AACvB,SAASC,kBAAkB;AAA4D,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAMvF,eAAe,SAASC,oBAAoBA,CAAA,EAAG;EAC7C,IAAAC,SAAA,GAAsCpB,QAAQ,CAAoB,IAAI,CAAC;IAAAqB,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAAhEG,WAAW,GAAAF,UAAA;IAAEG,cAAc,GAAAH,UAAA;EAClC,IAAAI,UAAA,GAA8CzB,QAAQ,CAAC,EAAE,CAAC;IAAA0B,UAAA,GAAAJ,cAAA,CAAAG,UAAA;IAAnDE,eAAe,GAAAD,UAAA;IAAEE,kBAAkB,GAAAF,UAAA;EAC1C,IAAAG,UAAA,GAA8B7B,QAAQ,CAAC,IAAI,CAAC;IAAA8B,UAAA,GAAAR,cAAA,CAAAO,UAAA;IAArCE,OAAO,GAAAD,UAAA;IAAEE,UAAU,GAAAF,UAAA;EAE1B,IAAMG,KAAK,GAAGzB,QAAQ,CAAC,CAAC;EACxB,IAAM0B,UAAU,GAAG3B,aAAa,CAAC,CAAC;EAClC,IAAA4B,IAAA,GAA0CF,KAAK,CAACG,MAAM,IAAI,CAAC,CAAC;IAApDC,gBAAgB,GAAAF,IAAA,CAAhBE,gBAAgB;EAExBpC,SAAS,CAAC,YAAM;IACd+B,UAAU,CAAC,IAAI,CAAC;IAChB,IAAMM,SAAS;MAAA,IAAAC,KAAA,GAAAC,iBAAA,CAAG,aAAY;QAE5BC,UAAU,CAAC,YAAM;UACfT,UAAU,CAAC,KAAK,CAAC;QACnB,CAAC,EAAE,IAAI,CAAC;MACV,CAAC;MAAA,gBALKM,SAASA,CAAA;QAAA,OAAAC,KAAA,CAAAG,KAAA,OAAAC,SAAA;MAAA;IAAA,GAKd;IACDL,SAAS,CAAC,CAAC;EACb,CAAC,EAAE,EAAE,CAAC;EAENhC,cAAc,CACZP,KAAK,CAAC6C,WAAW,CAAC,YAAM;IACtB,IAAMC,OAAO;MAAA,IAAAC,KAAA,GAAAN,iBAAA,CAAG,aAAY;QAC1B,IAAMO,MAAM,SAAStC,cAAc,CAACuC,cAAc,CAAC,CAAC;QACpD,IAAID,MAAM,EAAE;UACV,IAAI;YACF,MAAMrC,WAAW,CAACmC,OAAO,CAACE,MAAM,CAAC,CAACE,IAAI,CAAC,UAACC,QAAQ,EAAK;cACnD1B,cAAc,CAAC0B,QAAQ,oBAARA,QAAQ,CAAEC,IAAI,CAAC;YAChC,CAAC,CAAC;UACJ,CAAC,CAAC,OAAOC,KAAK,EAAE,CAAC;QACnB;MACF,CAAC;MAAA,gBATKP,OAAOA,CAAA;QAAA,OAAAC,KAAA,CAAAJ,KAAA,OAAAC,SAAA;MAAA;IAAA,GASZ;IACDE,OAAO,CAAC,CAAC;EACX,CAAC,EAAE,EAAE,CACP,CAAC;EAED,IAAMQ,iBAAiB;IAAA,IAAAC,KAAA,GAAAd,iBAAA,CAAG,aAAY;MAAA,IAAAe,iBAAA;MACpC,IAAMC,QAA2B,GAAG;QAClCC,MAAM,GAAAF,iBAAA,GAAEhC,WAAW,oBAAXA,WAAW,CAAEmC,IAAI,YAAAH,iBAAA,GAAI,EAAE;QAC/B5B,eAAe,EAAEA,eAAe,WAAfA,eAAe,GAAI,EAAE;QACtCU,gBAAgB,EAAEA,gBAAgB,WAAhBA,gBAAgB,GAAI;MACxC,CAAC;MACDsB,OAAO,CAACC,GAAG,CAAC,eAAe,GAAGC,IAAI,CAACC,SAAS,CAACN,QAAQ,CAAC,CAAC;MACvD5C,kBAAkB,CAACmD,iBAAiB,CAACP,QAAQ,CAAC,CAC3CP,IAAI,CAAC,UAACC,QAAQ,EAAK;QAClBS,OAAO,CAACC,GAAG,CAAC,KAAK,GAAGV,QAAQ,CAAC;QAC7B,IAAIA,QAAQ,CAACc,MAAM,KAAK,GAAG,EAAE;UAC3BL,OAAO,CAACC,GAAG,CAACV,QAAQ,CAACC,IAAI,CAAC;QAC5B,CAAC,MAAM;UACLQ,OAAO,CAACC,GAAG,CAAC,aAAa,GAAGV,QAAQ,CAACc,MAAM,CAAC;QAC9C;MACF,CAAC,CAAC,CACDC,KAAK,CAAC,UAACb,KAAK,EAAK;QAChBO,OAAO,CAACP,KAAK,CAAC,SAAS,GAAGA,KAAK,CAAC;QAChCO,OAAO,CAACC,GAAG,CAAC,kBAAkB,GAAGR,KAAK,CAACF,QAAQ,CAAC;QAChD,QAAQE,KAAK,CAACF,QAAQ,CAACc,MAAM;UAC3B,KAAK,GAAG;YAENL,OAAO,CAACC,GAAG,CAAC,OAAO,CAAC;YACpB;UACF,KAAK,GAAG;YAEND,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAC;YACrB;QACJ;MACF,CAAC,CAAC;MACJ1B,UAAU,CAACgC,QAAQ,CAAC,YAAqB,CAAC;IAC5C,CAAC;IAAA,gBA/BKb,iBAAiBA,CAAA;MAAA,OAAAC,KAAA,CAAAZ,KAAA,OAAAC,SAAA;IAAA;EAAA,GA+BtB;EAED,OACE7B,IAAA,CAACZ,IAAI;IAAAiE,QAAA,EACFpC,OAAO,GACNjB,IAAA,CAACT,iBAAiB;MAAC+D,IAAI,EAAC,OAAO;MAACC,KAAK,EAAC;IAAM,CAAE,CAAC,GAE/CnD,KAAA,CAAAF,SAAA;MAAAmD,QAAA,GACErD,IAAA,CAACV,KAAK;QACJkE,MAAM,EAAE;UAAEC,GAAG,EAAElC;QAAiB,CAAE;QAClCmC,KAAK,EAAE;UAAEC,KAAK,EAAE,GAAG;UAAEC,MAAM,EAAE;QAAI;MAAE,CACpC,CAAC,EACF5D,IAAA,CAACH,gBAAgB;QACfgE,WAAW,EAAC,kBAAkB;QAC9BC,KAAK,EAAEjD,eAAgB;QACvBkD,YAAY,EAAE,SAAAA,aAACD,KAAmC;UAAA,OAChDhD,kBAAkB,CAACgD,KAAK,CAAC;QAAA;MAC1B,CACF,CAAC,EACF9D,IAAA,CAACX,MAAM;QAAC2E,KAAK,EAAC,aAAa;QAACC,OAAO,EAAE1B;MAAkB,CAAE,CAAC;IAAA,CAC1D;EACH,CACG,CAAC;AAEX"},"metadata":{},"sourceType":"module","externalDependencies":[]}