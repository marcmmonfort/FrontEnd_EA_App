{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport axios from \"axios\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nvar API_URL = \"http://147.83.7.158:5432/\";\nexport var SessionService = function () {\n  function SessionService() {\n    _classCallCheck(this, SessionService);\n  }\n  _createClass(SessionService, null, [{\n    key: \"login\",\n    value: function () {\n      var _login = _asyncToGenerator(function* (auth) {\n        try {\n          var response = yield axios.post(API_URL + \"user/loginfrontend\", auth);\n          console.log(response);\n          return response;\n        } catch (error) {\n          console.error(\"Error during login:\", error);\n          throw error;\n        }\n      });\n      function login(_x) {\n        return _login.apply(this, arguments);\n      }\n      return login;\n    }()\n  }, {\n    key: \"register\",\n    value: function () {\n      var _register = _asyncToGenerator(function* (user) {\n        console.log(user);\n        try {\n          var response = yield axios.post(API_URL + \"user/register\", user);\n          console.log(response);\n          console.log(\"Register Bien\");\n          return response;\n        } catch (error) {\n          console.error(\"Error during register:\", error);\n          throw error;\n        }\n      });\n      function register(_x2) {\n        return _register.apply(this, arguments);\n      }\n      return register;\n    }()\n  }, {\n    key: \"getCurrentUser\",\n    value: function () {\n      var _getCurrentUser = _asyncToGenerator(function* () {\n        try {\n          var userId = yield AsyncStorage.getItem('uuid');\n          console.log(\"AAAAAAAAAAAAAAAAAA (raw value):\", userId);\n          if (userId) {\n            console.log(\"AAAAAAAAAAAAAAAAAA (parsed value):\", JSON.parse(userId));\n            return JSON.parse(userId);\n          } else console.log(\"UserId not found\");\n        } catch (error) {\n          console.error(\"Error al obtener el usuario actual:\", error);\n        }\n      });\n      function getCurrentUser() {\n        return _getCurrentUser.apply(this, arguments);\n      }\n      return getCurrentUser;\n    }()\n  }, {\n    key: \"setCurrentUser\",\n    value: function setCurrentUser(userId, token) {\n      try {\n        console.log(\"Saving userId to AsyncStorage:\", userId);\n        AsyncStorage.setItem(\"uuid\", userId);\n        AsyncStorage.setItem(\"token\", token);\n      } catch (error) {\n        console.error(\"Error saving userId to AsyncStorage:\", error);\n      }\n    }\n  }, {\n    key: \"logOut\",\n    value: function logOut() {\n      try {\n        AsyncStorage.removeItem(\"userId\");\n        AsyncStorage.removeItem(\"token\");\n      } catch (error) {}\n    }\n  }]);\n  return SessionService;\n}();","map":{"version":3,"names":["axios","AsyncStorage","API_URL","SessionService","_classCallCheck","_createClass","key","value","_login","_asyncToGenerator","auth","response","post","console","log","error","login","_x","apply","arguments","_register","user","register","_x2","_getCurrentUser","userId","getItem","JSON","parse","getCurrentUser","setCurrentUser","token","setItem","logOut","removeItem"],"sources":["C:/Users/oscar/Desktop/proyecto/2005/FrontEnd_EA_app/my-project/src/infrastructure/services/user/session.service.ts"],"sourcesContent":["import axios from \"axios\";\r\nimport { AuthEntity, UserAuthEntity } from \"../../../domain/user/user.entity\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\n\r\nconst API_URL = \"http://147.83.7.158:5432/\";\r\n\r\nexport class SessionService {\r\n  static async login(auth: AuthEntity) {\r\n    try {\r\n      const response = await axios.post(API_URL + \"user/loginfrontend\", auth);\r\n      console.log(response);\r\n      return response;\r\n    } catch (error) {\r\n      console.error(\"Error during login:\", error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  static async register(user: UserAuthEntity) {\r\n    console.log(user);\r\n    try {\r\n      const response = await axios.post(API_URL + \"user/register\", user);\r\n      console.log(response);\r\n      console.log(\"Register Bien\");\r\n      return response;\r\n    } catch (error) {\r\n      console.error(\"Error during register:\", error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  static async getCurrentUser() {\r\n    try {\r\n      const userId = await AsyncStorage.getItem('uuid');\r\n      console.log(\"AAAAAAAAAAAAAAAAAA (raw value):\", userId);\r\n  \r\n      if (userId) {\r\n        console.log(\"AAAAAAAAAAAAAAAAAA (parsed value):\", JSON.parse(userId));\r\n        return JSON.parse(userId);\r\n      }\r\n      else(console.log(\"UserId not found\"));\r\n    } catch (error) {\r\n      console.error(\"Error al obtener el usuario actual:\", error);\r\n    }\r\n  }\r\n  \r\n\r\n  static setCurrentUser(userId: string, token: string) {\r\n    try {\r\n      console.log(\"Saving userId to AsyncStorage:\", userId);\r\n      AsyncStorage.setItem(\"uuid\", userId);\r\n      AsyncStorage.setItem(\"token\", token);\r\n    } catch (error) {\r\n      console.error(\"Error saving userId to AsyncStorage:\", error);\r\n    }\r\n  }\r\n  \r\n\r\n  static logOut() {\r\n    try {\r\n      AsyncStorage.removeItem(\"userId\");\r\n      AsyncStorage.removeItem(\"token\");\r\n    } catch (error) {}\r\n  }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}