{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport axios from \"axios\";\nimport { AuthHeaderService } from \"../user/authHeaders.service\";\nvar API_URL = \"http://147.83.7.158:5432/publication\";\nexport var PublicationService = function () {\n  function PublicationService() {\n    _classCallCheck(this, PublicationService);\n  }\n  _createClass(PublicationService, null, [{\n    key: \"uploadPublication\",\n    value: function () {\n      var _uploadPublication = _asyncToGenerator(function* (publication) {\n        var token = yield AuthHeaderService.authHeader();\n        console.log(\"ESTO ES EL TOKEN:  \" + token);\n        try {\n          console.log(\"ando aqui\");\n          var response = yield axios.post(API_URL, publication, {\n            headers: token\n          });\n          console.log(\"RESPUESTA: \" + response.data);\n          return response;\n        } catch (error) {\n          console.error('Error during post publication: ' + error);\n          throw error;\n        }\n      });\n      function uploadPublication(_x) {\n        return _uploadPublication.apply(this, arguments);\n      }\n      return uploadPublication;\n    }()\n  }, {\n    key: \"feed\",\n    value: function () {\n      var _feed = _asyncToGenerator(function* (numPage, uuid) {\n        var token = yield AuthHeaderService.authHeader();\n        try {\n          var response = yield axios.get(API_URL + \"/followingPost/\" + numPage + \"/\" + uuid, {\n            headers: token\n          });\n          return response;\n        } catch (error) {\n          console.error('Error during load feed:', error);\n          throw error;\n        }\n      });\n      function feed(_x2, _x3) {\n        return _feed.apply(this, arguments);\n      }\n      return feed;\n    }()\n  }, {\n    key: \"obtainOwnPosts\",\n    value: function () {\n      var _obtainOwnPosts = _asyncToGenerator(function* (uuid) {\n        var token = yield AuthHeaderService.authHeader();\n        try {\n          var response = yield axios.get(API_URL + \"/ownPosts/\" + uuid, {\n            headers: token\n          });\n          return response;\n        } catch (error) {\n          console.error('Error when obtaining the own posts:', error);\n          throw error;\n        }\n      });\n      function obtainOwnPosts(_x4) {\n        return _obtainOwnPosts.apply(this, arguments);\n      }\n      return obtainOwnPosts;\n    }()\n  }, {\n    key: \"numPublicationsFollowing\",\n    value: function () {\n      var _numPublicationsFollowing = _asyncToGenerator(function* (uuid) {\n        var token = yield AuthHeaderService.authHeader();\n        try {\n          var response = yield axios.get(API_URL + \"/numFollowingPost/\" + uuid, {\n            headers: token\n          });\n          return response;\n        } catch (error) {\n          console.error('Error during load feed:', error);\n          throw error;\n        }\n      });\n      function numPublicationsFollowing(_x5) {\n        return _numPublicationsFollowing.apply(this, arguments);\n      }\n      return numPublicationsFollowing;\n    }()\n  }, {\n    key: \"updateLike\",\n    value: function () {\n      var _updateLike = _asyncToGenerator(function* (uuid, uuidUser) {\n        var token = yield AuthHeaderService.authHeader();\n        try {\n          var response = yield axios.put(API_URL + \"/parameter/like\", {\n            uuid: uuid,\n            uuidUser: uuidUser\n          }, {\n            headers: token\n          });\n          return response;\n        } catch (error) {\n          console.error('Error during load feed:', error);\n          throw error;\n        }\n      });\n      function updateLike(_x6, _x7) {\n        return _updateLike.apply(this, arguments);\n      }\n      return updateLike;\n    }()\n  }, {\n    key: \"deleteLike\",\n    value: function () {\n      var _deleteLike = _asyncToGenerator(function* (uuid, uuidUser) {\n        var token = yield AuthHeaderService.authHeader();\n        try {\n          var response = yield axios.put(API_URL + \"/delete/like\", {\n            uuid: uuid,\n            uuidUser: uuidUser\n          }, {\n            headers: token\n          });\n          return response;\n        } catch (error) {\n          console.error('Error during load feed:', error);\n          throw error;\n        }\n      });\n      function deleteLike(_x8, _x9) {\n        return _deleteLike.apply(this, arguments);\n      }\n      return deleteLike;\n    }()\n  }, {\n    key: \"onePublication\",\n    value: function () {\n      var _onePublication = _asyncToGenerator(function* (uuid) {\n        var token = yield AuthHeaderService.authHeader();\n        try {\n          var response = yield axios.get(API_URL + \"/\" + uuid, {\n            headers: token\n          });\n          return response;\n        } catch (error) {\n          console.error('Error during load feed:', error);\n          throw error;\n        }\n      });\n      function onePublication(_x10) {\n        return _onePublication.apply(this, arguments);\n      }\n      return onePublication;\n    }()\n  }, {\n    key: \"getListLikes\",\n    value: function () {\n      var _getListLikes = _asyncToGenerator(function* (uuid, numPage) {\n        var token = yield AuthHeaderService.authHeader();\n        try {\n          var response = yield axios.get(API_URL + \"/likes/\" + uuid + \"/\" + numPage, {\n            headers: token\n          });\n          return response;\n        } catch (error) {\n          console.error('Error during load feed:', error);\n          throw error;\n        }\n      });\n      function getListLikes(_x11, _x12) {\n        return _getListLikes.apply(this, arguments);\n      }\n      return getListLikes;\n    }()\n  }, {\n    key: \"getPublication\",\n    value: function () {\n      var _getPublication = _asyncToGenerator(function* (uuid) {\n        var token = yield AuthHeaderService.authHeader();\n        try {\n          var response = yield axios.get(API_URL + \"/\" + uuid, {\n            headers: token\n          });\n          return response;\n        } catch (error) {\n          console.error('Error during load feed:', error);\n          throw error;\n        }\n      });\n      function getPublication(_x13) {\n        return _getPublication.apply(this, arguments);\n      }\n      return getPublication;\n    }()\n  }]);\n  return PublicationService;\n}();","map":{"version":3,"names":["axios","AuthHeaderService","API_URL","PublicationService","_classCallCheck","_createClass","key","value","_uploadPublication","_asyncToGenerator","publication","token","authHeader","console","log","response","post","headers","data","error","uploadPublication","_x","apply","arguments","_feed","numPage","uuid","get","feed","_x2","_x3","_obtainOwnPosts","obtainOwnPosts","_x4","_numPublicationsFollowing","numPublicationsFollowing","_x5","_updateLike","uuidUser","put","updateLike","_x6","_x7","_deleteLike","deleteLike","_x8","_x9","_onePublication","onePublication","_x10","_getListLikes","getListLikes","_x11","_x12","_getPublication","getPublication","_x13"],"sources":["C:/Users/eloim/Uni/ProyectoEA/Frontend_/FrontEnd_EA_App/src/infrastructure/services/publication/publication.service.ts"],"sourcesContent":["import axios from \"axios\";\r\nimport { AuthHeaderService } from \"../user/authHeaders.service\";\r\nimport { PublicationEntity } from \"../../../domain/publication/publication.entity\";\r\n\r\nconst API_URL = \"http://147.83.7.158:5432/publication\";\r\n\r\n\r\n\r\n\r\nexport class PublicationService {\r\n\r\n  static async uploadPublication(publication:PublicationEntity){\r\n    const token = await AuthHeaderService.authHeader();\r\n    console.log(\"ESTO ES EL TOKEN:  \"+token)\r\n    try{\r\n      console.log(\"ando aqui\");\r\n      const response=await axios.post(API_URL, publication,{headers:token});\r\n      console.log(\"RESPUESTA: \"+ response.data)\r\n      return response;\r\n    } catch(error){\r\n      console.error('Error during post publication: '+error);\r\n      throw error;\r\n    }\r\n  }\r\n  \r\n  static async feed(numPage: string, uuid: string) {\r\n    const token = await AuthHeaderService.authHeader();\r\n    try {\r\n      const response = await axios.get(API_URL + \"/followingPost/\" + numPage + \"/\" + uuid, { headers: token });\r\n      //console.log(\"try response \" + response)\r\n      return response;\r\n    } catch (error) {\r\n      console.error('Error during load feed:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  // BEREAL\r\n  static async obtainOwnPosts(uuid: string) {\r\n    const token = await AuthHeaderService.authHeader();\r\n    try {\r\n      const response = await axios.get(API_URL + \"/ownPosts/\" + uuid, { headers: token });\r\n      return response;\r\n    } catch (error) {\r\n      console.error('Error when obtaining the own posts:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  static async numPublicationsFollowing( uuid: string) {\r\n    const token = await AuthHeaderService.authHeader();\r\n    try {\r\n      const response = await axios.get(API_URL + \"/numFollowingPost/\" + uuid, { headers: token });\r\n      //console.log(\"try response \" + response)\r\n      return response;\r\n    } catch (error) {\r\n      console.error('Error during load feed:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  static async updateLike( uuid: string, uuidUser:string) {\r\n    const token = await AuthHeaderService.authHeader();\r\n    try {\r\n      const response = await axios.put(API_URL + \"/parameter/like\",{ uuid: uuid, uuidUser: uuidUser}, { headers: token });\r\n      //console.log(\"try response \" + response)\r\n      return response;\r\n    } catch (error) {\r\n      console.error('Error during load feed:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  static async deleteLike( uuid: string, uuidUser:string) {\r\n    const token = await AuthHeaderService.authHeader();\r\n    try {\r\n      const response = await axios.put(API_URL + \"/delete/like\",{ uuid: uuid, uuidUser: uuidUser}, { headers: token });\r\n      //console.log(\"try response \" + response)\r\n      return response;\r\n    } catch (error) {\r\n      console.error('Error during load feed:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  static async onePublication( uuid: string) {\r\n    const token = await AuthHeaderService.authHeader();\r\n    try {\r\n      const response = await axios.get(API_URL + \"/\" + uuid, { headers: token });\r\n      //console.log(\"try response \" + response)\r\n      return response;\r\n    } catch (error) {\r\n      console.error('Error during load feed:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  static async getListLikes( uuid: string|undefined, numPage:string) {\r\n    const token = await AuthHeaderService.authHeader();\r\n    try {\r\n      const response = await axios.get(API_URL + \"/likes/\" + uuid + \"/\" + numPage, { headers: token });\r\n      return response;\r\n    } catch (error) {\r\n      console.error('Error during load feed:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  static async getPublication( uuid: string|undefined) {\r\n    const token = await AuthHeaderService.authHeader();\r\n    try {\r\n      const response = await axios.get(API_URL + \"/\"+ uuid, { headers: token });\r\n      return response;\r\n    } catch (error) {\r\n      console.error('Error during load feed:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}