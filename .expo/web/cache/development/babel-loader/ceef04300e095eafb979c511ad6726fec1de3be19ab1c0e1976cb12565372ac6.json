{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport React, { useEffect, useState } from 'react';\nimport ImageBackground from \"react-native-web/dist/exports/ImageBackground\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport * as Font from 'expo-font';\nimport jwtDecode from 'jwt-decode';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nfunction loadFonts() {\n  return _loadFonts.apply(this, arguments);\n}\nfunction _loadFonts() {\n  _loadFonts = _asyncToGenerator(function* () {\n    yield Font.loadAsync({\n      'Rafaella': require(\"../../../../assets/fonts/Rafaella.ttf\"),\n      'SFNS': require(\"../../../../assets/fonts/SFNS.otf\")\n    });\n  });\n  return _loadFonts.apply(this, arguments);\n}\nexport default function SplashScreen() {\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    fontsLoaded = _useState2[0],\n    setFontsLoaded = _useState2[1];\n  useEffect(function () {\n    loadFonts().then(function () {\n      setFontsLoaded(true);\n    });\n  }, []);\n  var titleFont = Platform.select({\n    ios: 'Rafaella',\n    android: 'Rafaella'\n  });\n  var bodyFont = Platform.select({\n    ios: 'SFNS',\n    android: 'SFNS'\n  });\n  var navigation = useNavigation();\n  var styles = StyleSheet.create({\n    mainContainer: {\n      flex: 1,\n      justifyContent: 'center',\n      alignItems: 'center',\n      position: 'relative'\n    },\n    footerContainer: {\n      position: 'absolute',\n      bottom: 0,\n      left: 0,\n      right: 0,\n      alignItems: 'center',\n      marginBottom: 32\n    },\n    image: {\n      width: 100,\n      height: 100,\n      resizeMode: 'cover'\n    },\n    text_normal: {\n      color: 'white',\n      fontSize: 20,\n      marginBottom: 10\n    },\n    titleText: {\n      color: 'white',\n      fontFamily: titleFont,\n      fontSize: 38,\n      marginTop: 20\n    },\n    creditsText: {\n      color: 'white',\n      fontFamily: bodyFont,\n      fontSize: 18,\n      marginTop: 14\n    },\n    versionText: {\n      color: '#66fcf1',\n      fontFamily: bodyFont,\n      fontSize: 18,\n      marginBottom: 2\n    },\n    footerText: {\n      color: 'white',\n      fontFamily: bodyFont,\n      fontSize: 14\n    },\n    backgroundImage: {\n      flex: 1,\n      resizeMode: 'cover'\n    }\n  });\n  useEffect(function () {\n    setTimeout(function () {\n      var checkToken = function () {\n        var _ref = _asyncToGenerator(function* () {\n          try {\n            var token = yield AsyncStorage.getItem('token');\n            if (token) {\n              var decodedToken = jwtDecode(token);\n              var currentTime = Date.now() / 1000;\n              console.log(\"DECODED TOKEN: \", decodedToken);\n              if (decodedToken.exp < currentTime) {\n                navigation.navigate('LoginScreen');\n              } else {\n                console.log(\"El token es válido\");\n                navigation.navigate('HomeScreen', {\n                  screen: 'ProfileScreen'\n                });\n              }\n            } else {\n              navigation.navigate('LoginScreen');\n            }\n          } catch (error) {\n            console.log('Error al obtener el token:', error);\n          }\n        });\n        return function checkToken() {\n          return _ref.apply(this, arguments);\n        };\n      }();\n      checkToken();\n    }, 3600);\n  }, []);\n  if (!fontsLoaded) {\n    return null;\n  }\n  return _jsx(ImageBackground, {\n    source: require(\"../../../../assets/visualcontent/background_1.png\"),\n    style: styles.backgroundImage,\n    children: _jsxs(View, {\n      style: styles.mainContainer,\n      children: [_jsxs(View, {\n        style: styles.mainContainer,\n        children: [_jsx(Image, {\n          source: require(\"../../../../assets/logo_lplan.png\"),\n          style: styles.image\n        }), _jsx(Text, {\n          style: styles.titleText,\n          children: \"Lplan\"\n        }), _jsx(Text, {\n          style: styles.creditsText,\n          children: \"2023\"\n        })]\n      }), _jsxs(View, {\n        style: styles.footerContainer,\n        children: [_jsx(Text, {\n          style: styles.versionText,\n          children: \"Group 3\"\n        }), _jsx(Text, {\n          style: styles.footerText,\n          children: \"Eloi, Gen\\xEDs, \\xD3scar, Victor, Marc\"\n        })]\n      })]\n    })\n  });\n}","map":{"version":3,"names":["React","useEffect","useState","ImageBackground","Image","View","StyleSheet","Text","Platform","useNavigation","AsyncStorage","Font","jwtDecode","jsx","_jsx","jsxs","_jsxs","loadFonts","_loadFonts","apply","arguments","_asyncToGenerator","loadAsync","require","SplashScreen","_useState","_useState2","_slicedToArray","fontsLoaded","setFontsLoaded","then","titleFont","select","ios","android","bodyFont","navigation","styles","create","mainContainer","flex","justifyContent","alignItems","position","footerContainer","bottom","left","right","marginBottom","image","width","height","resizeMode","text_normal","color","fontSize","titleText","fontFamily","marginTop","creditsText","versionText","footerText","backgroundImage","setTimeout","checkToken","_ref","token","getItem","decodedToken","currentTime","Date","now","console","log","exp","navigate","screen","error","source","style","children"],"sources":["C:/Users/eloim/Uni/ProyectoEA/Frontend_/FrontEnd_EA_App/src/infrastructure/UI/screens/splash.screen.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { ImageBackground, Image, View, StyleSheet, Text, Platform } from 'react-native';\r\nimport { useNavigation } from \"@react-navigation/native\";\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport * as Font from 'expo-font';\r\nimport NormalText from '../components/texts/NormalText';\r\nimport Color from '../constants/color/Color';\r\nimport Video from 'react-native-video';\r\nimport jwtDecode from 'jwt-decode';\r\nimport { DecodedToken } from '../../../domain/decodedToken';\r\n\r\nasync function loadFonts() {\r\n  await Font.loadAsync({\r\n    'Rafaella': require('../../../../assets/fonts/Rafaella.ttf'),\r\n    'SFNS': require('../../../../assets/fonts/SFNS.otf'),\r\n  });\r\n}\r\n\r\nexport default function SplashScreen() {\r\n  const [fontsLoaded, setFontsLoaded] = useState(false);\r\n\r\n  useEffect(() => {\r\n    loadFonts().then(() => {\r\n      setFontsLoaded(true);\r\n    });\r\n  }, []);\r\n\r\n  const titleFont = Platform.select({\r\n    ios: 'Rafaella',\r\n    android: 'Rafaella',\r\n  });\r\n  const bodyFont = Platform.select({\r\n    ios: 'SFNS',\r\n    android: 'SFNS',\r\n  });\r\n\r\n  const navigation = useNavigation();\r\n\r\n  const styles = StyleSheet.create({\r\n    mainContainer: {\r\n      flex: 1,\r\n      justifyContent: 'center',\r\n      alignItems: 'center',\r\n      position: 'relative',\r\n    },\r\n    footerContainer: {\r\n      position: 'absolute',\r\n      bottom: 0,\r\n      left: 0,\r\n      right: 0,\r\n      alignItems: 'center',\r\n      marginBottom: 32,\r\n    },\r\n    image: {\r\n      width: 100,\r\n      height: 100,\r\n      resizeMode: 'cover',\r\n    },\r\n    text_normal: {\r\n      color: 'white',\r\n      fontSize: 20,\r\n      marginBottom: 10,\r\n    },\r\n    titleText: {\r\n      color: 'white',\r\n      fontFamily: titleFont,\r\n      fontSize: 38,\r\n      marginTop: 20,\r\n    },\r\n    creditsText: {\r\n      color: 'white',\r\n      fontFamily: bodyFont,\r\n      fontSize: 18,\r\n      marginTop: 14,\r\n    },\r\n    versionText: {\r\n      color: '#66fcf1',\r\n      fontFamily: bodyFont,\r\n      fontSize: 18,\r\n      marginBottom: 2,\r\n    },\r\n    footerText: {\r\n      color: 'white',\r\n      fontFamily: bodyFont,\r\n      fontSize: 14,\r\n    },\r\n    backgroundImage: {\r\n      flex: 1,\r\n      resizeMode: 'cover',\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    setTimeout(() => {\r\n        const checkToken = async () => {\r\n            try {\r\n              const token = await AsyncStorage.getItem('token');\r\n              if (token) {\r\n                const decodedToken : DecodedToken = jwtDecode(token);\r\n                const currentTime = Date.now() / 1000; // Obtener la hora actual en segundos\r\n                console.log(\"DECODED TOKEN: \", decodedToken);\r\n\r\n                if (decodedToken.exp < currentTime) {\r\n                  \r\n                  // El token ha expirado, redirigir al usuario a la pantalla de inicio de sesión\r\n                  navigation.navigate('LoginScreen' as never);\r\n                } else {\r\n                  // El token es válido, redirigir al usuario a la pantalla principal\r\n                  console.log(\"El token es válido\");\r\n                  navigation.navigate('HomeScreen' as never, { screen: 'ProfileScreen' } as never);\r\n                }\r\n                \r\n                // navigation.navigate('HomeScreen' as never, { screen: 'ProfileScreen' } as never);\r\n              } else {\r\n                navigation.navigate('LoginScreen' as never);\r\n              }\r\n            } catch (error) {\r\n              console.log('Error al obtener el token:', error);\r\n            }\r\n          };\r\n        checkToken();\r\n    }, 3600);\r\n  }, []);\r\n\r\n  if (!fontsLoaded) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <ImageBackground source={require('../../../../assets/visualcontent/background_1.png')} style={styles.backgroundImage}>\r\n      <View style={styles.mainContainer}>\r\n        <View style={styles.mainContainer}>\r\n            <Image source={require('../../../../assets/logo_lplan.png')} style={styles.image} />\r\n            <Text style={styles.titleText}>Lplan</Text>\r\n            <Text style={styles.creditsText}>2023</Text>\r\n        </View>\r\n        <View style={styles.footerContainer}>\r\n            <Text style={styles.versionText}>Group 3</Text>\r\n            <Text style={styles.footerText}>Eloi, Genís, Óscar, Victor, Marc</Text>\r\n        </View>\r\n      </View>\r\n    </ImageBackground>\r\n    \r\n  );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}