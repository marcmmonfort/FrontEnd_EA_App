{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport React, { useState } from \"react\";\nimport Svg, { Defs, Path, Pattern, Use, Image } from \"react-native-svg\";\nimport MainContainer from \"../../components/containers/Main\";\nimport Title from \"../../components/texts/Title\";\nimport SubTitle from \"../../components/texts/Subtitle\";\nimport StyledTextInputs from \"../../components/inputs/StyledTextInputs\";\nimport ButtonGradient from \"../../components/buttons/ButtonGradient\";\nimport { SessionService } from \"../../../services/user/session.service\";\nimport Swal from 'sweetalert2';\nimport NormalText from \"../../components/texts/NormalText\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Register from \"../../components/texts/Register\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function LoginScreen() {\n  var navigation = useNavigation();\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    inputEmail = _useState2[0],\n    setInputEmail = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    inputPassword = _useState4[0],\n    setInputPassword = _useState4[1];\n  function SvgTop() {\n    return _jsxs(Svg, {\n      width: 171,\n      height: 150,\n      fill: \"none\",\n      children: [_jsx(Path, {\n        fill: \"url(#a)\",\n        d: \"M0 0h171v150H0z\"\n      }), _jsxs(Defs, {\n        children: [_jsx(Pattern, {\n          id: \"a\",\n          patternContentUnits: \"objectBoundingBox\",\n          width: 1,\n          height: 1,\n          children: _jsx(Use, {\n            xlinkHref: \"#b\",\n            transform: \"scale(.0014 .00159)\"\n          })\n        }), _jsx(Image, {\n          id: \"b\",\n          width: 715,\n          height: 630\n        })]\n      })]\n    });\n  }\n  return _jsxs(MainContainer, {\n    children: [_jsx(SvgTop, {}), _jsx(Title, {\n      children: \"Lplan\"\n    }), _jsx(SubTitle, {\n      children: \"Let's Go!\"\n    }), _jsx(StyledTextInputs, {\n      placeholder: \"Mail\",\n      value: inputEmail,\n      onChangeText: setInputEmail\n    }), _jsx(StyledTextInputs, {\n      placeholder: \"Password\",\n      value: inputPassword,\n      onChangeText: setInputPassword,\n      secureTextEntry: true\n    }), _jsx(ButtonGradient, {\n      onPress: function onPress() {\n        var formData = {\n          mailUser: inputEmail,\n          passwordUser: inputPassword\n        };\n        console.log(\"formData \" + formData.mailUser);\n        console.log(\"formData \" + formData.passwordUser);\n        SessionService.login(formData).then(function (response) {\n          console.log(response);\n          if (response.status === 200) {\n            Swal.fire({\n              position: 'center',\n              icon: 'success',\n              customClass: {\n                icon: 'swal-icon-color',\n                title: 'swal-title-font',\n                popup: 'swal-popup-width'\n              },\n              title: 'Login Succesful!',\n              showConfirmButton: false,\n              timerProgressBar: true,\n              timer: 1000,\n              iconColor: '#000',\n              background: '#66fcf1',\n              backdrop: \"rgba(0,0,0,0.8)\"\n            }).then(function () {\n              console.log(response.data);\n              SessionService.setCurrentUser(JSON.stringify(response.data.user._id), JSON.stringify(response.data.token));\n              console.log('_id' + JSON.stringify(response.data.user._id));\n              console.log('token' + JSON.stringify(response.data.token));\n              navigation.navigate('Home');\n            });\n          }\n        }).catch(function (error) {\n          console.error(\"error: \" + error);\n          console.log(\"error.response: \" + error.response);\n          switch (error.response.status) {\n            case 403:\n              Swal.fire({\n                position: 'center',\n                icon: 'error',\n                customClass: {\n                  icon: 'swal-icon-color',\n                  title: 'swal-title-font',\n                  popup: 'swal-popup-width'\n                },\n                title: 'Incorrect Password!',\n                showConfirmButton: false,\n                timerProgressBar: true,\n                timer: 1000,\n                iconColor: '#000',\n                background: '#66fcf1',\n                backdrop: \"rgba(0,0,0,0.8)\"\n              });\n              break;\n            case 404:\n              Swal.fire({\n                position: 'center',\n                icon: 'error',\n                customClass: {\n                  icon: 'swal-icon-color',\n                  title: 'swal-title-font',\n                  popup: 'swal-popup-width'\n                },\n                title: 'User does not exist!',\n                showConfirmButton: false,\n                timerProgressBar: true,\n                timer: 1000,\n                iconColor: '#000',\n                background: '#66fcf1',\n                backdrop: \"rgba(0,0,0,0.8)\"\n              }).then(function () {\n                navigation.navigate('Register');\n              });\n              break;\n          }\n        });\n      }\n    }), _jsx(NormalText, {\n      children: \"Aren't you still an @lplan member?\"\n    }), _jsx(TouchableOpacity, {\n      onPress: function onPress() {\n        return navigation.navigate('Register');\n      },\n      children: _jsx(Register, {\n        children: \"Sign Up!\"\n      })\n    }), _jsx(StatusBar, {})]\n  });\n}","map":{"version":3,"names":["useNavigation","React","useState","Svg","Defs","Path","Pattern","Use","Image","MainContainer","Title","SubTitle","StyledTextInputs","ButtonGradient","SessionService","Swal","NormalText","StatusBar","TouchableOpacity","Register","jsx","_jsx","jsxs","_jsxs","LoginScreen","navigation","_useState","_useState2","_slicedToArray","inputEmail","setInputEmail","_useState3","_useState4","inputPassword","setInputPassword","SvgTop","width","height","fill","children","d","id","patternContentUnits","xlinkHref","transform","placeholder","value","onChangeText","secureTextEntry","onPress","formData","mailUser","passwordUser","console","log","login","then","response","status","fire","position","icon","customClass","title","popup","showConfirmButton","timerProgressBar","timer","iconColor","background","backdrop","data","setCurrentUser","JSON","stringify","user","_id","token","navigate","catch","error"],"sources":["C:/Users/oscar/Desktop/proyecto/2005/FrontEnd_EA_app/my-project/src/infrastructure/UI/screens/login/login.screen.tsx"],"sourcesContent":["import { useNavigation } from \"@react-navigation/native\";\r\nimport React, { useState } from \"react\";\r\nimport Svg, { Defs, Path, Pattern, Use,Image } from \"react-native-svg\";\r\nimport MainContainer from \"../../components/containers/Main\";\r\nimport Title from \"../../components/texts/Title\";\r\nimport SubTitle from \"../../components/texts/Subtitle\";\r\nimport StyledTextInputs from \"../../components/inputs/StyledTextInputs\";\r\nimport ButtonGradient from \"../../components/buttons/ButtonGradient\";\r\nimport { AuthEntity } from \"../../../../domain/user/user.entity\";\r\nimport { SessionService } from \"../../../services/user/session.service\";\r\nimport Swal from 'sweetalert2';\r\nimport NormalText from \"../../components/texts/NormalText\";\r\nimport { StatusBar, TouchableOpacity } from \"react-native\";\r\nimport Register from \"../../components/texts/Register\";\r\n\r\n\r\n\r\nexport default function LoginScreen(){\r\n    const navigation=useNavigation();\r\n\r\n    const [inputEmail, setInputEmail] = useState('');\r\n    const [inputPassword, setInputPassword] = useState('');\r\n\r\n    function SvgTop(){\r\n        return(\r\n            <Svg\r\n            width={171}\r\n            height={150}\r\n            fill=\"none\"\r\n            >\r\n            <Path fill=\"url(#a)\" d=\"M0 0h171v150H0z\" />\r\n                <Defs>\r\n                    <Pattern\r\n                    id=\"a\"\r\n                    patternContentUnits=\"objectBoundingBox\"\r\n                    width={1}\r\n                    height={1}\r\n                    >\r\n                    <Use xlinkHref=\"#b\" transform=\"scale(.0014 .00159)\" />\r\n                    </Pattern>\r\n                <Image\r\n                id=\"b\"\r\n                width={715}\r\n                height={630}\r\n                />\r\n                </Defs>\r\n            </Svg>\r\n        )\r\n    }\r\n\r\n    return(\r\n        \r\n        <MainContainer>\r\n      <SvgTop/>\r\n      <Title>Lplan</Title>\r\n      <SubTitle>Let's Go!</SubTitle>\r\n      <StyledTextInputs \r\n        placeholder = 'Mail'\r\n        value = {inputEmail}\r\n        onChangeText = {setInputEmail}\r\n        />         \r\n      <StyledTextInputs \r\n        placeholder = 'Password' \r\n        value = {inputPassword} \r\n        onChangeText = {setInputPassword}\r\n        secureTextEntry={true}\r\n        />   \r\n      <ButtonGradient onPress={() => {\r\n        const formData: AuthEntity = {\r\n          mailUser: inputEmail,\r\n          passwordUser: inputPassword,\r\n        };\r\n        \r\n        console.log(\"formData \" + formData.mailUser)\r\n        console.log(\"formData \" + formData.passwordUser)\r\n        SessionService.login(formData)\r\n          .then((response) => {\r\n            console.log(response)\r\n            if (response.status === 200) {\r\n              Swal.fire({\r\n                position: 'center',\r\n                icon: 'success',\r\n                customClass: {\r\n                  icon: 'swal-icon-color',\r\n                  title: 'swal-title-font',\r\n                  popup: 'swal-popup-width'\r\n                },\r\n                title: 'Login Succesful!',\r\n                showConfirmButton: false,\r\n                timerProgressBar: true,\r\n                timer: 1000,\r\n                iconColor: '#000',\r\n                background: '#66fcf1',\r\n                backdrop: `rgba(0,0,0,0.8)`\r\n                }).then(() => {\r\n                  console.log(response.data);\r\n                  SessionService.setCurrentUser(JSON.stringify(response.data.user._id), JSON.stringify(response.data.token));\r\n                  console.log('_id' + JSON.stringify(response.data.user._id));\r\n                  console.log('token' + JSON.stringify(response.data.token));\r\n                  navigation.navigate('Home' as never);  \r\n                });\r\n              }\r\n          })\r\n          .catch((error) => {\r\n            console.error(\"error: \" + error);\r\n            console.log(\"error.response: \" + error.response)\r\n            switch (error.response.status) {\r\n              case 403:\r\n                // Poner aquí el alert ...\r\n                Swal.fire({\r\n                  position: 'center',\r\n                icon: 'error',\r\n                customClass: {\r\n                  icon: 'swal-icon-color',\r\n                  title: 'swal-title-font',\r\n                  popup: 'swal-popup-width'\r\n                },\r\n                title: 'Incorrect Password!',\r\n                showConfirmButton: false,\r\n                timerProgressBar: true,\r\n                timer: 1000,\r\n                iconColor: '#000',\r\n                background: '#66fcf1',\r\n                backdrop: `rgba(0,0,0,0.8)`\r\n                });\r\n                break;\r\n              case 404:\r\n                  // Poner aquí el alert ...\r\n                  Swal.fire({\r\n                    position: 'center',\r\n                  icon: 'error',\r\n                  customClass: {\r\n                    icon: 'swal-icon-color',\r\n                    title: 'swal-title-font',\r\n                    popup: 'swal-popup-width'\r\n                  },\r\n                  title: 'User does not exist!',\r\n                  showConfirmButton: false,\r\n                  timerProgressBar: true,\r\n                  timer: 1000,\r\n                  iconColor: '#000',\r\n                  background: '#66fcf1',\r\n                  backdrop: `rgba(0,0,0,0.8)`\r\n                }).then(() => {\r\n                  navigation.navigate('Register' as never);  \r\n                });\r\n                  break;\r\n          }\r\n        });\r\n      }} />\r\n      <NormalText>Aren't you still an @lplan member?</NormalText>\r\n      <TouchableOpacity onPress={() => navigation.navigate('Register' as never)}>\r\n        <Register>Sign Up!</Register>\r\n      </TouchableOpacity>\r\n      <StatusBar/> \r\n    </MainContainer>\r\n    )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}